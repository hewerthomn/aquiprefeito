<ion-content padding="true">

	<div class="list card padding" ng-show="issue == null" style="text-align: center">
		<h4 class="positive">
			<ion-spinner icon="ripple"></ion-spinner> Carregando...
		</h4>
	</div>

	<div id="issue" ng-hide="issue == null">

	  <div class="list card">
	  	<div class="padding">
	  		<br>
				<button class="button button-small button-clear" ng-click="goBack()" style="float:right"><i class="ion-close"></i></button>
	  	</div>

	  	<div class="item item-avatar">
		    <img ng-src="{{ issue.category.icon }}">
		    <h2>{{ issue.category.name }}</h2>
		    <p>{{ issue.created_at | date }}</p>
		  </div>

		  <div class="item item-body">
		    <img class="full-image" ng-src="{{ photo(issue) }}">
		    <p>
		    	<span class="positive">{{ issue.username }}</span>
		      {{ issue.comment }}
		    </p>
		    <p>
		      <a href="#" class="subdued" ng-if="issue.likes > 0">
		      	<ng-pluralize count="issue.likes" when="{'one': '1 Like', 'other': '{} Likes'}"></ng-pluralize>
		      </a>
		      <a href="#" class="subdued" ng-if="issue.comments.length > 0">
		      	<ng-pluralize count="issue.comments.length" when="{'one': '1 Comentário', 'other': '{} Comentários'}"></ng-pluralize>
		      </a>
		    </p>
		  </div>

		  <div class="item tabs tabs-secondary tabs-icon-left">
		    <a class="tab-item" ng-click="like()">
		      <i class="icon ion-thumbsup {{ (liked > 0) ? 'positive' : '' }}"></i>
		      Like
		    </a>
		    <a class="tab-item" href="#" ng-click="showCommentBox()">
		      <i class="icon ion-chatbox"></i>
		      Comentar
		    </a>
		    <a class="tab-item" href="#">
		      <i class="icon ion-share"></i>
		      Compartilhar
		    </a>
		  </div>
		</div><!--list card-->

	  <div class="list list-inset" ng-show="commentBoxVisible">
	  	<h3 class="item">Comentar sobre problema</h3>
		  <label class="item item-input item-floating-label">
		    <small class="input-label positive">Nome</small>
		    <input type="text" id="username" placeholder="Nome" ng-model="comment.username">
		  </label>
		  <label class="item item-input item-floating-label">
		    <small class="input-label positive">Comentário</small>
		    <textarea rows="4" placeholder="Comentário" ng-model="comment.comment"></textarea>
		  </label>
		  <button class="button button-block button-positive" ng-click="sendComment(comment)" ng-hide="sendingComment">
	    	<i class="ion-paper-airplane"></i> Enviar comentário
	    </button>
	    <button class="button button-block button-positive" ng-show="sendingComment" disabled="disabled">
	    	Aguarde...
	    </button>
		</div>

		<div class="list list-inset">
			<h3 class="item"><i class="ion-chatboxes"></i> Comentários</h3>
	    <a class="item item-avatar" ng-repeat="c in issue.comments">
	      <img ng-src="{{ c.avatar }}">
	      <span class="positive">{{ c.username }}</span>
	      <p>{{ c.comment }}</p>
	    </a>
		</div>

		<br><br>

	</div><!--#issue-->

</ion-content>
